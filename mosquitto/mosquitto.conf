persistence true
persistence_location /mosquitto/data/
log_dest file /mosquitto/log/mosquitto.log
log_type all

# MQTT listener on port 1883 (standard MQTT port)
listener 1883
protocol mqtt

# WebSocket listener on port 9001
listener 9001
protocol websockets

# Allow anonymous connections (disable in production)
allow_anonymous true

# For production, uncomment and configure authentication
# password_file /mosquitto/config/passwd
# acl_file /mosquitto/config/acl

# Topic structure for Smart Stick system:
# 
# Raspberry Pi → Cloud Server:
# - smartstick/{deviceId}/sensors/sonar    - 3 sonar sensor data (left, center, right)
# - smartstick/{deviceId}/sensors/ir       - IR sensor data
# - smartstick/{deviceId}/sensors/gps      - GPS location data
# - smartstick/{deviceId}/sensors/imu      - IMU sensor data (accelerometer, gyroscope)
# - smartstick/{deviceId}/telemetry        - Combined sensor data
# - smartstick/{deviceId}/sos              - Emergency SOS alerts
# - smartstick/{deviceId}/status           - Device status updates
#
# Cloud Server → Mobile App:
# - smartstick/mobile/{userId}/sos         - SOS alerts to specific user
# - smartstick/mobile/{userId}/alert       - General alerts (fall detection, etc.)
# - smartstick/mobile/broadcast/sos        - Broadcast SOS alerts
#
# Cloud Server → Raspberry Pi:
# - smartstick/{deviceId}/command          - Commands to device
# - smartstick/{deviceId}/config           - Configuration updates